---
title: ict第一次考核总结
date: 2024-04-13 14:25:14
tags: []
categories:
---

# ict第一次考核总结

## 实验

![image-20231015232727394](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231015232727394.png)



### MSTP配置

![image-20231015234903319](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231015234903319.png)



主要问题：

1. 在所有交换机下都要将vlan和实例进行一个绑定

2. 再者就是判断根桥，虽然题目可能不会告诉你，但是你要自己判断，本题vlan100走sw1/sw2-sw3-sw5，vlan200走sw1/sw2-sw4-sw5，差别在于vlan 100只走sw3，所以sw3就是实例10的根桥一样的，vlan 200的sw4就是实例20的根桥

3. 链路聚合开销为所有链路开销和的平均数



1. stp region-configuration
2. region-name mstp（改名）
3. revision-level 1（版本）
4. instance 10 vlan 100（vlan 绑定实例）
5. instance 20 vlan 200
6. active regionconfiguration（激活配置）
7. stp instance priority



### 根桥，根端口，指定端口，替代端口选举原则

#### 1.根桥的选举（树根）

判断各个交换机的BID，BID=优先级+MAC地址（优先级默认等于32768 ，范围0-65535 ，步长是4096）

**优先级低的成为根，如果优先级相同比较MAC地址，最低的为根。**

#### 2.根端口的选举（距离树根最近的端口，除根桥外，每个交换机都要有一个根端口，且只有一个）

若第一个相同则比较下一个，若不同则直接得出结论

##### 比较根路径开销（从根桥到交换机）

根路径开销低的为根端口 ![img](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/20210604234616184.png)

GE端口开销是2万，E端口开销是20万

**从根桥出发到交换机的端口进去才是端口的根路径开销**

上图LSW1的GE0/0/4的根路径开销是2万；LSW1的GE0/0/1的根路径开销是4万

##### 比较上行设备BID

BID=优先级+MAC地址（优先级默认等于32768 ，范围0-65535 ，步长是4096）上行设备的优先级低的该端口成为根端口，如果上级设备优先级相同则比较上级设备的MAC地址，最低的该端口为根端口。

#####  比较上行设备PID

PID=端口优先级+端口标识（端口优先级默认等于128，端口优先级的范围0-255）端口标识是e0/0/1之类的号码（e0/0/1比e0/0/2的端口标识小），先比较端口优先级，低的入选，若端口优先级相同再比较端口标识，低的入选。

#### ***\*.指定端口的选举***

***（每个主干链路上一定要选举一个指定端口，且只有一个，根端口不参与选举，根桥上的端口全为指定端口，）若第一个相同则比较下一个，若不同则直接得出结论\****



##### 比较根路径开销

##### （从各自当前交换机的根端口到根桥）低的获选



##### 比较各自本交换机的BID



##### 比较各自的本端口的PID

#### ***\*备份端口\****

既不是根端口也不是指定端口的端口

#### 端口的几种状态

- Discarding：端口既不转发用户流量也不学习MAC地址；（丢弃）
- Learning：端口不转发用户流量但是学习MAC地址；
- Forwarding：端口既转发用户流量又学习MAC地址。



### DHCP配置

当初就没用懂，导致实操寄了

#### 服务器

1. 打开dhcp

2. 进入端口配置IP

3. 通过静态路由或者动态路由使得服务器获得中继DHCP的ip地址（单条链路可以使用默认路由配置）

4. 全局创建pool池

5. 配置pool池

6. 进入端口打开DHCP全局模式

   栗子：

   ```py
   dhcp enable
   配IP
   ip pool vlan100//pool池创建
    gateway-list 192.168.100.254 //网关
    network 192.168.100.0 mask 255.255.255.0 //地址段
    excluded-ip-address 192.168.100.99 //保留地址
    lease day 0 hour 3 minute 0 //设置租期
    dns-list 114.114.114.114 //dns
   int 端口
   DHCP select global
   ```

   

#### 中继

1. 打开dhcp
2. 进入端口配置ip
3. 选择端口dhcp select relay
4. 绑定服务器IPdhcp relay server-ip XXXX



栗子：

```c
int 端口
ip配置
dhcp select relay
dhcp relay server-ip XXXX
```



## 理论

### 私有地址

![image-20231019115628358](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019115628358.png)

A类：10.0.0.0到10.255.255.255是私有地址

B类：172.16.0.0到172.31.255.255是私有地址

C类：192.168.0.0到192.168.255.255是私有地址。

**注意看这里D是192.162.10.3不是192.168.10.3**





### 广播地址

![image-20231019120106587](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019120106587.png)



将255.255.255.240展开可得1111 1111 1111 1111 1111 1111 1111 0000

将132.119.100.200展开可得132.119.100.1100 1000，将最后得1000替换成1111，得到11001111=207



### DHCP中继和DHCP服务器之间交互的报文为？

![image-20231019121228700](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019121228700.png)

抓个包发现使用的是unicast报文

![image-20231019121442316](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019121442316.png)

1.单播（unicast）：网络节点之间的通信就好像是人们之间的对话一样。如果一个人对另外一个人说话，那么用网络技术的术语来描述就是“单播”，此时信息的接收和传递只在两个节点之间进行。单播在网络中得到了广泛的应用，网络上绝大部分的数据都是以单播的形式传输的，只是一般网络用户不知道而已。例如，你在收发电子邮件、浏览网页时，必须与邮件服务器、Web服务器建立连接**，此时使用的就是单播数据传输方式。但是通常使用“点对点通信”（Point to Point）代替“单播”**，因为“单播”一般与“多播”和“广播”相对应使用。

2.多播（multicast）：“**多播”也可以称为“组播”**，在网络技术的应用并不是很多，**网上视频会议、网上视频点播特别适合采用多播方式**。因为如果采用单播方式，逐个节点传输，有多少个目标节点，就会有多少次传送过程，这种方式显然效率极低，是不可取的；如果采用不区分目标、全部发送的广播方式，虽然一次可以传送完数据，但是显然达不到区分特定数据接收对象的目的。采用多播方式，既可以实现一次传送所有目标节点的数据，也可以达到只对特定对象传送数据的目的。 　　**IP网络的多播一般通过多播IP地址来实现。多播IP地址就是D类IP地址，即224.0.0.0至239.255.255.255之间的IP地址。Windows 2000中的DHCP管理器支持多播IP地址的自动分配。** 

3.广播（broadcast）：“广播”在网络中的应用较多，**如客户机通过DHCP自动获得IP地址的过程就是通过广播来实现的**。但是同单播和多播相比，广播几乎占用了子网内网络的所有带宽。拿开会打一个比方吧，在会场上只能有一个人发言，想象一下如果所有的人同时都用麦克风发言，那会场上就会乱成一锅粥。集线器由于其工作原理决定了不可能过滤广播风暴，一般的交换机也没有这一功能，不过现在有的网络交换机（如全向的QS系列交换机）也有过滤广播风暴功能了，路由器本身就有隔离广播风暴的作用。 　　广播风暴不能完全杜绝，但是只能在同一子网内传播，就好像喇叭的声音只能在同一会场内传播一样，因此在由几百台甚至上千台电脑构成的大中型局域网中，一般进行子网划分，就像将一个大厅用墙壁隔离成许多小厅一样，以达到隔离广播风暴的目的。 　　在IP网络中，广播地址用IP地址“255.255.255.255”来表示，这个IP地址代表同一子网内所有的IP地址。

4. 任播：Anycast 是一种为一组端点提供多个路由路径的技术，**每个端点都分配有相同的 IP 地址**。 组中的每个设备在网络上通告相同的地址，路由协议用于选择最佳目的地。**Anycast 主要可以用于扩展无状态服务，例如 DNS 或 HTTP，方法是将多个节点放在同一 IP 地址后面，并使用等价多路径 (ECMP) 路由来引导这些节点之间的流量。** 任播与单播不同，单播中每个端点都有自己独立的 IP 地址。



### osi七层模型及其功能

物理层-数据链路层-网络层-传输层-会话层-表达层-应用层

#### 功能

##### 物理层

**规定通信设备的机械的、电气的、功能的和过程的特性，用以建立、维护和拆除物理链路连接**。具体地讲，机械 特性规定了网络连接时所需接插件的规格尺寸、引脚数量和排列情况等;电气特性规定了在物理连接上传输bit流时线路上信号电平的大小、阻抗匹配、传输速率 距离限制等;功能特性是指对各个信号先分配确切的信号含义，即定义了DTE和DCE之间各个线路的功能;规程特性定义了利用信号线进行bit流传输的一组 操作规程，是指在物理连接的建立、维护、交换信息是，DTE和DCE双放在各电路上的动作系列。在这一层，数据的单位称为比特(bit)。属于物理层定义的典型规范代表包括：EIA/TIA RS-232、EIA/TIA RS-449、V.35、RJ-45等。

##### 数据链路层

在物理层提供比特流服务的基础上**，建立相邻结点之间的数据链路，通过差错控制提供数据帧(Frame)在信道上无差错的传输，并进行各电路上的动作系列**。数据链路层在不可靠的物理介质上提供可靠的传输。该层的作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。在这一层，数据的单位称为帧(frame)。数据链路层协议的代表包括：SDLC、HDLC、PPP、STP、帧中继等。





##### 网络层



在 计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。**网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送**。网络层将数据链路层提供的帧组成数据包，包中封装有网络层包头，其中含有逻辑地址信息- -源站点和目的站点地址的网络地址。如 果你在谈论一个IP地址，那么你是在处理第3层的问题，这是“数据包”问题，而不是第2层的“帧”。IP是第3层问题的一部分，此外还有一些路由协议和地 址解析协议(ARP)。有关路由的一切事情都在这第3层处理。地址解析和路由是3层的重要目的。网络层还可以实现拥塞控制、网际互连等功能。在这一层，数据的单位称为数据包(packet)。网络层协议的代表包括：IP、IPX、RIP、OSPF等。



##### 传输层

第4层的数据单元也称作数据包(packets)。但是，当你谈论TCP等具体的协议时又有特殊的叫法，TCP的数据单元称为段 (segments)而UDP协议的数据单元称为“数据报(datagrams)”。这**个层负责获取全部信息，因此，它必须跟踪数据单元碎片、乱序到达的 数据包和其它在传输过程中可能发生的危险**。第4层为上层提供端到端(最终用户到最终用户)的透明的、可靠的数据传输服务。所为透明的传输是指在通信过程中 传输层对上层屏蔽了通信传输系统的具体细节。传输层协议的代表包括：TCP、UDP、SPX等。





##### 会话层

这一层也可以称为会晤层或对话层，在会话层及以上的高层次中，数据传送的单位不再另外命名，而是统称为报文。**会话层不参与具体的传输，它提供包括访问验证和会话管理在内的建立和维护应用之间通信的机制。**<u>如服务器验证用户登录便是由会话层完成的</u>

##### 表示层

它主要负责**数据的格式化、编码、加密解密以及压缩解压缩**等处理，以确**保数据在不同系统之间的可靠传输和正确解析。**

##### 应用层

**应用层为操作系统或网络应用程序提供访问网络服务的接口。应用层协议的代表包括：Telnet、FTP、HTTP、SNMP等。**

#### 各层用到的协议

![img](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/v2-363018760274c3fc551392010f8f3187_1440w.webp)



### 交换机路由表学习

交换机收到一个帧会记录相应的mac地址和接口，vlan id 应该是不会修改或者分配的

![image-20231019124501220](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019124501220.png)



### DHCP的工作模式和端口号

**工作模式是UDP，服务器端口号为67，客户端的端口号为68**

![image-20231019124804462](C:/Users/alex/AppData/Roaming/Typora/typora-user-images/image-20231019124804462.png)

（false）

### IPv6

![image-20231019125228430](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019125228430.png)

不是点分而是冒号16进制

### telnet

![image-20231019125316193](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019125316193.png)

**默认端口号是23号**

### IGP（内部网关协议）和EDP（外部网关协议）

IGP：RIP，OSPF，ISIS

EDP：BGP

### 链路聚合

![image-20231019131130197](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019131130197.png)

#### 模式

手工分担，LACP（自动）

#### 优点

实现增加链路的带宽，提高可靠性，实现负载分担

DHCP报文（主机---服务器）



![image-20231019132115252](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019132115252.png)



实验抓包发现真是这样



![image-20231019132057721](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019132057721.png)



ip分配过程

![image-20231019132301021](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20231019132301021.png)
