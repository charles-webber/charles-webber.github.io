---
title: 云计算
tags: 云计算
description: ict培训云计算
cover: https://images.wallpaperscraft.com/image/single/silhouette_wall_screens_1067807_1280x720.jpg
swiper_index: 1
---



# 云计算

## 云计算定义

不是技术，而是服务模式以及实现这种模式背后的技术（信息电场）

![image-20240518094918390](C:/Users/alex/AppData/Roaming/Typora/typora-user-images/image-20240518094918390.png)

**云计算是一种模型，它可以实现随时随地，便捷的，随需求应变地从可配置的计算资源共享此中获取所需的资源，资源能够快速供应并且释放，使得管理资源的工作量与服务商的交互减少到最小限度**



**<u>是一种模型/商业模式，像用水用电去使用底层的ict资源</u>**



## 云计算的价值

![image-20240518110711727](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518110711727.png)

1. 按需自助服务
2. 广泛网络接入
3. 资源池化
4. 快速部署，弹性扩容
5. 可计量服务



## 服务模式

![image-20240518113340753](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518113340753.png)

三类：最高级就是saas，中间级别paas，最低级iaas

![image-20240518113752299](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518113752299.png)

![image-20240902092005793](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902092005793.png)

## 部署模式

- 私有云：单一组织拥有（）**存放重要数据**，部署相对困难
- 公有云：运营商所拥有的（）服务类型多，部署简单
- 混合云：多种云构成的（）重要的放私有云，其他丢公有云上
- 行业云（社区云）：针对特定行业和人群定制的云（）--这个一般可以省略



公有云、私有云和混合云这三种云服务模式，由于它们各自的特点和优势，通常会被不同的部门或机构采用。

以下是一些具体的例子：

**公有云**：

1. **互联网公司**：这些公司通常需要快速扩展其服务，并且愿意利用第三方提供的可扩展性和成本效益。例如，各种规模的互联网初创公司和App开发商可能会选择使用公有云服务，以便快速部署和扩展其在线服务。
2. **中小企业(SMEs)**：对于资源有限的中小企业来说，公有云提供了一个无需大量前期投资即可获得必要IT资源的方案。它们可以按需购买计算资源，而不必自己维护数据中心。
3. **研究和教育机构**：大学和研究机构可能会使用公有云进行数据存储和处理，特别是在需要大量计算资源进行科学研究时。

**私有云**：

1. **大型企业**：具有敏感数据的大型企业或那些对数据安全和隐私要求极高的金融机构，如银行、保险公司和律师事务所，更倾向于使用私有云。这是因为私有云提供了更高水平的定制、安全性和控制能力。
2. **政府部门**：政府机关通常处理机密信息，因此他们更有可能建立私有云来确保数据的安全和符合监管要求。
3. **医疗保健行业**：医院和医疗机构由于处理患者数据，通常需要符合严格的合规性标准，因此可能会选择私有云解决方案以保护敏感医疗记录。

**混合云**：

1. **跨国公司**：拥有多个业务单元和遍布全球的办事处的跨国公司可能会同时使用公有云和私有云，以便根据每个业务需求灵活地管理资源和服务。
2. **需要特殊数据处理的行业**：比如媒体和娱乐行业，可能需要将核心数据和应用程序保留在私有云中，同时使用公有云来进行内容分发等。
3. **逐渐过渡的组织**：一些组织可能正在从传统的IT基础设施转移到云服务，但出于安全、合规或其他原因并不准备完全放弃对基础设施的控制。对这些组织而言，混合云提供了一种逐步过渡的方法。



**行业云：**

- **互联网行业**：互联网公司需要快速扩展其服务以适应不断变化的市场需求，行业云可以提供灵活的资源来支持这种快速增长。
- **金融行业**：金融行业对数据安全和合规性要求极高，行业云可以为金融机构提供符合法规要求的定制服务。
- **政务行业**：政府机构处理大量敏感数据，需要高度的控制权和安全性，行业云能够满足这些需求并提供更好的数据管理和服务。
- **制造业**：制造企业可以利用行业云进行数据分析和优化生产流程，同时提高供应链的效率。
- **医疗行业**：医疗机构需要存储和共享大量的患者数据，行业云能够提供高效安全的数据处理能力，同时满足HIPAA等医疗法规的要求。
- **教育行业**：教育机构可以使用行业云来管理学生信息、课程内容和在线学习平台，提供更好的教育资源和服务。
- **交通行业**：交通行业可以利用行业云进行数据分析，优化交通流量和物流管理。
- **农业行业**：行业云可以帮助农业企业进行作物监测、天气预测和资源管理，提高农业生产效率。
- **媒体行业**：媒体公司需要存储和处理大量的视频和音频文件，行业云提供了高效的存储和快速访问这些大型媒体资产的能力。



## 服务器应用部署架构

C/S架构和B/S架构

## MTBF

平均无故障工作时间

## 硬盘类型

- SATA--使用sata接口，超级能装
- SAS--使用SAS接口，传超级快，容量小
- NL-SAS--集合了sata和sas优点（速度sas》nl-sas》sata）
- SSD

## 网卡

![image-20240902095018637](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902095018637.png)

## BIOS

开机引导系统，负责系统和硬件之间的联动



## tco

TCO是**总体拥有成本（Total Cost of Ownership）**，就是7零8怪的钱全加起来



## cpu虚拟化

一个cpu在同一个时间下只能给一个进程计算，但是我们cpu会有超线程技术，支持一个cpu处理多一个任务，电脑里面说的24核心32线程就是指有八颗芯片支持超线程技术



## “cpu时间管理大师”

我虽然算得少，但是我算的快啊

**分时复用技术**



## 虚拟机

系统是应用在ring0之中的，app是应用在ring1和2中的，但是app里面会用到系统的敏感指令，于是就来骗我们的cpu，方法有三：半虚拟化、虚拟化、硬件辅助

![image-20240902104057508](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902104057508.png)

![image-20240518160308446](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518160308446.png)

## 虚拟化方法

**理论上一台虚拟机的cpu核数最大为线程数（但是一般就是核心数）**

![image-20240518161830717](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518161830717.png)



## 重要概念

- guest OS（虚拟操作系统）
- Guest Machine（虚拟机virtual machine）
- Hypervisor（vmm-virtual machine monitor，虚拟化软件层）
- Host OS（物理操作系统）
- Host Machine（物理机）





## 虚拟化的特点

1. 分区（同一个物理主机可以同时运行多个虚拟机）
2. 隔离（多个虚拟机之间不会相互影响）
3. 封装（每个虚拟机就是个文件，方便搬移）
4. 相对于硬件独立（虚拟机无需修改，即可在服务器上运行）



## 虚拟化分类

1. 裸金属型虚拟化（一型）

裸金属广泛应用于企业应用之中



优点：性能较好

缺点：安装使用相对困难，有一定的学习门槛

![image-20240518163754071](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518163754071.png)





2. 寄主型虚拟化（二型）

寄主适用于个人pc，可以满足虚拟

应用和普通软件

优点：简单

缺点：性能损耗

![image-20240518163715518](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518163715518.png)



## vcpu的计算



**系统可用的vCPU总数(逻辑处理器) = Socket数（CPU个数）x Core数（内核）x Thread数（超线程**）

## 影子页表（内存虚拟化）

内存的使用必须从0开始并且连续，否则不能使用、

![image-20240902105731708](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902105731708.png)

为此虚拟软件层会维持一个影子页表，将实际的内存转换为连续的内存，方便虚拟机的存储

## I/O虚拟化

- 半虚拟
- 全虚拟
- 硬件辅助虚拟化



## Xen架构（开源）

domin0特权虚拟机--不跑业务，只管理普通虚拟机，接收他们的信息和硬件沟通，有且只有一个（老板）

dominU普通虚拟机--跑业务，可以有多个（打工仔）



## KVM-Qemu架构（开源）

- 基于内核虚拟机
- OS=内核态+用户态
- KVM是linux机器上的模块，有了kvm之后，机器就变成了一个vmm
- **qemu**，kvm只能对cpu和内存进行虚拟化，除此之外的网络、i/o、存储虚拟化由qemu进行

## 闭源框架

- hyper-v
- wmwarre esxi
- huawei fusionphere

## 作业：

1. 企业为什么要使用虚拟化（虚拟化对比传统it的优点）

企业使用虚拟化技术相较于传统IT架构有多方面的优势，具体分析如下：

1. **资源整合**：虚拟化允许企业在单个物理服务器上创建多个虚拟机（VM），每个VM都可以运行独立的操作系统和应用程序。这样可以更有效地利用硬件资源，提高整体的资源利用率。
2. **成本节约**：通过虚拟化，企业可以减少对物理硬件的需求，因为可以在现有的硬件上运行更多的虚拟机。这降低了前期投资和长期的维护成本。
3. **自动配置和集中管理**：虚拟化技术使得IT资源的管理更加自动化和集中化。管理员可以远程完成日常操作，无需逐个处理每个工位上的主机，提高了管理效率。
4. **灾备恢复**：虚拟化提供了更加灵活和快速的灾难恢复解决方案。通过快照和复制功能，可以快速恢复数据和服务，减少潜在的业务中断时间。
5. **安全性提升**：虚拟化环境通常提供更强的隔离和安全措施，可以有效防止病毒和恶意软件的传播，保护企业数据不受威胁。
6. **跨平台支持**：虚拟化技术支持多种操作系统和应用程序在同一硬件上并行运行，这为跨平台应用提供了便利。
7. **可扩展性和灵活性**：企业可以根据业务需求动态地添加或移除资源，而不需要物理上的调整。这使得企业能够快速响应市场变化。
8. **高效的资源利用**：由于虚拟化技术可以动态调整资源分配，因此可以避免资源的浪费，确保硬件资源得到充分利用。
9. **支持创新和测试**：虚拟化环境支持快速部署和拆除实验环境，有助于企业进行新技术的测试和创新。

综上所述，虚拟化为企业带来了诸多好处，包括资源整合、成本节约、自动配置、灾备恢复、安全性提升、跨平台支持、可扩展性和灵活性、高效的资源利用、集中管理和动态分配以及支持创新和测试等方面。这些价值共同推动了企业在竞争激烈的市场环境中保持领先地位。

2. 在电脑中安装vmware 通过软件安装两个系统（专业版）

![image-20240518174733847](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518174733847.png)

安装centos成功

![image-20240518174833181](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240518174833181.png)安装windows成功





## 裸金属虚拟化

![image-20240601141844641](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240601141844641.png)

这个东西只是逻辑上的解决方案，里面的东西才是真的，比如说我们的FusionCompute

### 虚拟化套件分类

1. FusionCompute（8443）：必须有的功能部分，大脑 **包含CNA（计算节点代理）和VNA（web界面）**

FusionCompute是**云操作系统软件**，主要负责硬件资源的虚拟化，以及对虚拟资源、业务资源、用户资源的集中管理。<u>它采用虚拟计算、虚拟存储、虚拟网络等技术，完成计算资源、存储资源、网络资源的虚拟化</u>。同时通过统一的接口， 对这些虚拟资源进行集中调度和管理，从而降低业务的运行成本，保证系统的安全性和可靠性，协助运营商和企业构筑安全、绿色、节能的云数据中心能力。

2. ebackup:保护数据

eBackup是虚拟化备份软件，配合FusionCompute**快照功能和CBT(Changed Block Tracking)** 备份功能实现FusionSphere的虚拟机数据备份方案。

3. UltraVR：保护业务

UltraVR是**容灾业务管理软件**，利用底层**SAN存储系统**提供的异步沅程复制特性，提供虚拟机关键数据的数据保护和容灾恢复。

![image-20240601142231647](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240601142231647.png)



### FusionSphere的优势

华为FusionSphere虚拟化套件是业界领先的虚拟化解决方案，能够帮助客户带来如下的价值，从而大幅提升数据中心基础设施的效率。

**· 帮助客户提升数据中心基础设施的<u>资源利用率</u>。**（利用率）
**· 帮助客户成倍<u>缩短业务上线周期。</u>**（time）
**· 帮助客户成倍降低数据中心<u>能耗</u>。**（power）
**· 利用虚拟化基础设施的高可用和强恢复能力，实现业务<u>快速自动化故障恢复</u>，降低数据中心成本和增加系统应用的正常运行时间。**

FusionSphere虚拟化套件通过在服务器上部署虚拟化软件，使一台物理服务器可以承担多台服务器的工作。通过整合现有的工作负载并利用剩余的服务器以部署新的应用程序和解决方案，实现较高的整合率。





### VRM和CNA

*VRM（虚拟资源管理）*：VRM是集群的管理者，**管CNA**

**功能：**

· 管理集群内的块存储资源。
**· 管理集群内的网络资源(IP/VLAN),为虚拟机分配IP地址。**
· 管理集群内虚拟机的生命周期以及**虚拟机在计算节点上的分布和迁移。**
· 管理集群内资源的动态调整。
·通过对虚拟资源、用户数据的统一管理，对外提供弹性计算、存储、IP等服务。
·通过提供统一的操作维护管理接口，操作维护人员**<u>通过WebUl远程访问FusionCompute对整个系统进行操作维护</u>**，包含资源管理、资源监控、资源报表等。





*CNA（计算节点代理）*：**虚拟机放在CNA下面**，CNA就管这些虚拟机

**功能：**

· 提供**虚拟计算**功能。

· **管理**计算节点上的**虚拟机。**

**·管理**计算节点上的计算、存储、网络**资源**。



VRM很好玩啊，你有admin的账号的话，可以看到我们虚拟机的磁盘信息，工作状态等，可以新建用户，改网站名称，贴图等等，懂不懂我们华为的含金量啊





## 认识服务器

1. 电脑主机的加强版
2. 性能怪兽
3. 可靠性强99.99%（比电脑强100倍）
4. 可拓展性（插一万根硬盘）
5. 支持远程开关机（有一个维护口BMC，连接到这个口就会进入到IPMI、IBMC远程维护系统，其实就是一个web界面）
6. 拥有虚拟控制台，可以进行远程配置



### 装系统

虚拟控制台直接选择光驱进行安装

但是我们的网速很慢，我们先远程连接和服务器在一起的主机，把包先丢给这个主机，然后再通过主机传数据包（用远程工具）

要选择启动方式，有硬盘、光驱、可插拔设备

## RAID 磁盘冗余阵列

<u>**需要购买raid卡（贵）或者使用软件进行raid（占用cpu）**</u>

### RAID 0

把123456分为135 246两块盘，不能进行冗余，只能储存一份数据，性能好，空间利用率高，快

### RAID 1

两块盘**进行冗余**，把123456分为123456 123456两块盘

### RAID3

出现校验码选项，**全部存放在一个盘中**，<u>最多坏一块盘</u>

![image-20240902093925287](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902093925287.png)

### RAID 5

raid3升级版,**校验码放在不同的盘上**，<u>最多坏一块盘</u>

![image-20240608105002618](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240608105002618.png)

- 每一行是一个组成部分，称作条带，空一个格子来储存奇偶校验数据
- 至少需要三个盘

- 涉及算法：奇偶校验算法（当每两个数据位上的数据相同时，校验数据为0，校验数据不同时校验数据为1 ）
- 利用率：

$$
\frac{n-1}{n}
$$



### RAID 1 0

![image-20240608112312653](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240608112312653.png)

先做raid 1 4块变成2块

再做raid 0变成一块

**优点**

- 更加的安全
- 性能接近于RAID 0

**缺点**

- 至少需要4块盘
- 空间利用率低

### 问题

请根据RAID10推算为什么行业中不使用RAIDO1？ （复制的数据更多了，两边同时复制和一次复制的区别）
请根据RAID10推算RAID5的原理？



答：

1. 首先，从结构上来看，RAIDO1由于是先进行条带化处理，然后再做镜像，这意味着数据首先被分散存储到两个或多个磁盘上，然后这些已经条带化的磁盘组再被镜像。这种配置下**，一旦条带化的任何一个磁盘出现问题**，整个条带化的磁盘组的数据访问都会受到影响。相比之下，RAID10则是先将数据镜像，保证了数据的冗余备份，然后再对这些镜像的数据进行条带化处理，这样既保证了数据的安全性，也提高了读写性能。

   其次，从性能角度考虑，RAIDO1在理论上虽然也能提供较高的数据读写速度，但由于其结构的局限性，一旦其中一个条带化的磁盘组出现故障，即使其他磁盘正常，整个系统的性能也会大大降低。**而RAID10则没有这个问题，因为它的每一组镜像都独立于其他镜像组，任何一组的故障都不会影响到其他的磁盘组正常工作。**

   再者，考虑到容错性和数据安全性，RAIDO1只能容忍单个磁盘的故障，并且一旦发生故障，恢复数据的过程比较复杂，风险较高。**而RAID10配置可以容忍多达一半的硬盘数量同时发生故障**（前提是故障硬盘分布在不同的镜像组中），数据恢复更为简单和安全。

2. RAID5的原理基于数据条带化（RAID0）和奇偶校验技术，旨在提供数据冗余与性能的平衡。具体如下：

   **数据条带化**：RAID5继承了RAID0的数据条带化技术，将数据分布在所有成员磁盘上。这种分布可以提高数据的读写速度，因为系统可以同时从多个磁盘读取数据或向多个磁盘写入数据。

   **奇偶校验技术**：**与RAID0不同，RAID5增加了奇偶校验功能**，用于提供数据恢复能力。在RAID5的配置中，数据和其对应的奇偶校验信息被分布在不同的磁盘上。如果阵列中的任何一个磁盘出现故障，可以利用剩余磁盘上的数据和奇偶校验信息来重建丢失的数据。

   **分布式存储**：RAID5的特点是它的奇偶校验信息不是存储在一个专门的磁盘上，而是分布式地存储在所有磁盘上。这样可以减少任何单一磁盘的过度磨损，并提高整体的数据读写效率。

   **数据恢复原理**：在数据恢复时，RAID5通过异或运算重新计算丢失的数据块。例如，**如果有三块磁盘的RAID5配置，其中一块磁盘发生故障，系统会通过对其余两块磁盘上相应的数据块进行异或运算，以计算出故障磁盘上的数据。**

就是raid 0 加了一块硬盘作为校验的角色





### raid 50 

性能上得到了提升，但是需要6块盘，利用率还是raid 5的



**先配置raid，再装系统**



## 安装虚拟化平台

### 安装CNA

![image-20240616094531701](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616094531701.png)

红色的是管理网口，绿色的是业务网口

1. 登录服务器BMC（管理口）
2. 配置服务器raid，建议使用raid1

3. 将安装包烧录到我们的主机里面（光驱启动）

4. 系统盘选择，密码，时区，主机名等基本配置
5. 配置ip地址等网络参数



![image-20240616105748769](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616105748769.png)



### 安装虚拟机vrm

1. 打开华为安装工具---fusiion compute 安装工具
2. **浮动ip**：多个主备机ip不一致，管理起来非常麻烦，所以我们要统一一个ip方便管理员统一管理

![image-20240616111150270](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616111150270.png)

3. 选择主机：就是选择我们的CNA

![image-20240616111312416](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616111312416.png)

4. 

![image-20240616113116571](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616113116571.png)

本地安装需要安装一个插件，安装非常的慢啊，那么我们先将文件上传到CNA里面再安装不就快很多了吗



### 数据存储

当前cna可以直接使用的存储空间

- 服务器上插着的磁盘（要做raid）
- 存储设备：CNA可以使用的存储硬件，存储硬件进行格式化后（创建文化系统）还要绑定我们的cna



**windows里面叫分区盘，c盘d盘e盘，新添加的磁盘要初始化建立文件系统才能使用**



### QOS策略

需要集群为了保障关键型虚拟机的业务不被非关键虚拟机抢占，可以通过资源的QOS（服务质量）进行控制

### 份额

当各虚拟机资源抢占时，通过份额等比例分配资源

### 预留

限制虚拟机资源的使用上限

### 虚拟交换机（ovs）

![image-20240616152902583](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616152902583.png)

真实上的交换机会配置端口的类型，但是虚拟交换机会在web界面配置端口组，类似于脚本

### 分布式虚拟交换机

![image-20240616154153544](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616154153544.png)

分布式虚拟交换机：是一种逻辑概念，实际不存在，用于管理多个虚拟交换机

端口组：一组相同端口策略的端口集合，本质上是一个配置集合，包含了端口类型以及其他端口配置，创建虚拟机时，通过选择端口组，系统根据提前预设的端口组策略自动在虚拟交换机上创建一个相同配置的端口并且与虚拟机连接

### 上行链路

虚拟交换机到物理机网卡的一个概念

### **精髓来咯**

两个问题

1. 两个虚拟机不通，排错

​	cna1内部两台vm1vm3不通，那就是ovs1发生故障：地址错了呗，端口组错了呗，acl呗，端口允许的vlan不是我端口组的vlan

​    cna1内部两台vm1vm2不通，那就是ovs1或者是ovs3发生故障：acl呗，网关设置出错，安全策略

2. 大范围虚拟机不通，排错思路：

​	sw物理机出错

## 磁盘类型

### 精简盘

不立即分配磁盘空间，上层虚拟机使用时，使用多数，分配多少空间，并即刻对所分配的空间进行“虚拟化文件系统的格式化”（置零）

### 普通盘

立即分配磁盘空间，并立刻对所分配空间进行虚拟化文件系统的格式化操作

### 普通延迟置零

立即分配磁盘空间，但是不立即进行虚拟化文件系统的格式化，第一次向该磁盘写入数据时，在全盘进行虚拟化文件系统的格式化



### 性能排行

#### 写性能

**首次写入**：普通》精简》延迟

**普通写入**：普通=延时》精简

#### 读性能

一样

但是精简盘由于不用初始化，创建虚拟机非常快



独立不能打快照

![image-20240616164401337](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240616164401337.png)



## 桌面云

**将系统桌面以服务的形式直接提供给用户使用**

优势：

1. 绿色节能办公、降低运维压力、快速部署、提高效率
2. 节约成本
3. 数据保护
4. 移动办公

![image-20240902164022918](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902164022918.png)



### 桌面组

<u>用来关联用户或者用户组和虚拟机及虚拟机组的关联关系</u>



(1) 单用户：一个虚拟机关联给某一个用户，一个用户可以拥有多个虚拟机

（2）静态虚拟机：多个用户拥有同一个虚拟机，但是一个时间里只能有一个用户使用

（3）动态池：将一部分虚拟机放在一个池子中，用户登录时随机挑选一个虚拟机使用，不使用的时候其他用户也可以使用

（4）静态池:和动态池不同的是用户与虚拟机进行绑定，下次再使用该池时还是这个虚拟机  

## 内存复用

使得运行中的内存规格总和大于实际存在的物理内存

1. 内存共享：多个虚拟机共享相同的内存页
2. 内存置换：将虚拟机长时间不使用的内存置换到内存交换空间（操作系统提前在磁盘中开辟的一段空间）去（通过LRU算法）
3. 内存气泡：虚拟化系统通过借助已经安装在虚拟机中相关程序,来逻辑消耗虚拟机的内存,使得|虚拟机在逻辑上内存被自己程序消耗,就不再向底层申请资源,且该功能还可压缩内存给其他关键型业务虚拟机。



## NUMA非一致性内存访问策略

调整内存和cpu之间的关系，通过划分node（一个cpu和cpu所属的内存单位），来优化cpu对内存的访问效率。

![image-20240902145223785](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902145223785.png)

numa优先级大于内存复用



## 集群资源控制

- 故障和响应策略

- 接入控制：HA（高可靠）主机、专用故障主机、集群允许故障

- 计算资源调度（DRS）：VRM检测主机上的压力，**动态迁移**各主机上的虚拟机的数量，<u>将高负载的主机上的虚拟机转移到低负载上</u>

- 动态电源管理：将负载相对较低的主机上的虚拟机放到负载较高的主机上，并且将这个主机关机省电



## 规则组

1. 聚集虚拟机：我们团结一心，两台虚拟机被绑定在一起
2. 互斥虚拟机：当两个虚拟机配置为互斥时，二者不能同时出现



## 硬盘配置模式

- 普通延迟置零：也是一次把磁盘交出，但是擦写按需
- 普通：要多少给多少,一次擦写完所有的数据，很慢
- 精简：承诺给多少，但是只给你一点，还要再继续加

![image-20240902160744136](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902160744136.png)



## 光驱挂载

1. 本地方式
2. 共享方式
3. 文件方式

## tools

![image-20240902162334960](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902162334960.png)



## 快照

![image-20240902162839058](https://gitee.com/Charles-Webber/blog-image1/raw/master/img/image-20240902162839058.png)

1. 内存快照：保存磁盘和内存
2. 普通快照:只保存磁盘
3. 一致性快照:依赖tools下发命令，将内存中的数据强制保存到磁盘当中，恢复时将快照时刻的磁盘恢复



## 复制计算机

- 完整复制：创建了一个全新的主机，二者完全独立
- 链接克隆：和复制的主机有脐带效应，复制体必须依赖原有主机
